<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agendamento Basquete</title>
  <link rel="stylesheet" href="agendamento.css">
</head>
<body>
  <!-- Bot√£o Modo Noturno -->
  <button id="darkModeToggle" title="Alternar modo noturno">üåô</button>
  <!-- Loader -->
  <div id="loader">
    <img src="SPADRE.jpg.png" alt="Logo SPADRE" class="loader-img">
  </div>
  <!-- Bot√£o voltar ao topo -->
  <button id="backToTop" title="Voltar ao topo">‚ñ≤</button>
  <!-- Cabe√ßalho -->
  <header class="topo">
    <div class="container-header">
      <div class="perfil">
        <img src="SPADRE.jpg.png" alt="Foto da equipe" class="foto-perfil">
        <div class="nomes">
          <h1>SPADRE</h1>
          <p>Guilherme e Rafael</p>
        </div>
      </div>
      <nav class="menu">
        <a href="index.html">P√°gina Inicial</a>
        <a href="sobre.html">Sobre o Site</a>
        <a href="projetos.html">Projetos</a>
        <a href="turma.html">Turma</a>
        <a href="postagens.html">Postagens</a>
        <a href="jogos.html">Jogos</a>
        <a href="feira.html">E'Sustentar</a>
      </nav>
    </div>
  </header>

  <main class="conteudo">
    <section class="agenda-card">
      <h2>Agendamento do Basquete</h2>
      <p>Escolha um hor√°rio dispon√≠vel para reservar sua partida de Basquete durante a Feira!</p>
      <div class="horarios-lista" id="horariosLista"></div>
      <p class="obs">* Hor√°rios ocupados ficam destacados e n√£o podem ser reservados.</p>
    </section>
  </main>

  <!-- Rodap√© -->
  <footer>
    <p>¬© 2025 Guilherme Spada e Rafael Zambonin | Todos os direitos reservados</p>
  </footer>

  <!-- Scripts padr√£o + agendamento -->
  <script>
    // Loader
    window.addEventListener("load", () => {
      const loader = document.getElementById("loader");
      loader.classList.add("fadeOut");
      setTimeout(() => loader.style.display = "none", 800);
    });

    // Bot√£o voltar ao topo
    const backToTop = document.getElementById("backToTop");
    window.addEventListener("scroll", () => {
      if (window.scrollY > 300) backToTop.classList.add("show");
      else backToTop.classList.remove("show");
    });
    backToTop.addEventListener("click", () => window.scrollTo({ top: 0, behavior: "smooth" }));

    // Modo noturno com localStorage
    const darkModeBtn = document.getElementById('darkModeToggle');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    function setDarkMode(on) {
      if(on) document.body.classList.add('dark-mode');
      else document.body.classList.remove('dark-mode');
      localStorage.setItem('darkMode', on ? 'on' : 'off');
      darkModeBtn.innerHTML = on ? '‚òÄÔ∏è' : 'üåô';
    }
    (function() {
      const saved = localStorage.getItem('darkMode');
      if(saved === 'on' || (saved === null && prefersDark)) setDarkMode(true);
      else setDarkMode(false);
    })();
    darkModeBtn.addEventListener('click', () => {
      setDarkMode(!document.body.classList.contains('dark-mode'));
    });

    // =========================
    // SISTEMA DE AGENDAMENTO BASQUETE
    // =========================

    // Gera os hor√°rios de 08:00 at√© 20:00 de meia em meia hora
    function gerarHorarios() {
      const horarios = [];
      let hora = 8, minuto = 0;
      while (hora < 20 || (hora === 20 && minuto === 0)) {
        let h = hora.toString().padStart(2,'0');
        let m = minuto.toString().padStart(2,'0');
        horarios.push(`${h}:${m}`);
        minuto += 30;
        if (minuto === 60) { minuto = 0; hora++; }
        if (hora > 20 || (hora === 20 && minuto > 0)) break;
      }
      return horarios;
    }

    // Carrega agendamentos do localStorage
    function getAgendamentos() {
      return JSON.parse(localStorage.getItem('basquete_agenda') || '{}');
    }
    // Salva agendamentos no localStorage
    function setAgendamentos(obj) {
      localStorage.setItem('basquete_agenda', JSON.stringify(obj));
    }

    // Renderiza a lista de hor√°rios
    function renderHorarios() {
      const horarios = gerarHorarios();
      const agendados = getAgendamentos();
      const lista = document.getElementById('horariosLista');
      lista.innerHTML = '';
      horarios.forEach(horario => {
        const div = document.createElement('div');
        div.className = 'horario-item' + (agendados[horario] ? ' ocupado' : '');
        div.innerHTML = `<span>${horario} - ${agendados[horario] ? 'Ocupado' : 'Dispon√≠vel'}</span>`;
        if (!agendados[horario]) {
          div.title = "Clique para reservar este hor√°rio";
          div.addEventListener('click', () => reservarHorario(horario));
        }
        lista.appendChild(div);
      });
    }

    // Fun√ß√£o para reservar um hor√°rio
    function reservarHorario(horario) {
      if (!confirm(`Deseja reservar o hor√°rio ${horario} para seu time?`)) return;
      const nome = prompt("Digite o nome do time ou respons√°vel:");
      if (!nome) return;
      const agendados = getAgendamentos();
      agendados[horario] = nome;
      setAgendamentos(agendados);
      renderHorarios();
      alert(`Hor√°rio ${horario} reservado com sucesso!`);
    }

    // Inicializa a agenda ao carregar a p√°gina
    renderHorarios();
  </script>
</body>
</html>